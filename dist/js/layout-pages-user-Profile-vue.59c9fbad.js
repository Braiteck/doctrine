(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["layout-pages-user-Profile-vue"],{cdd0:function(a,t,e){"use strict";e.r(t);var s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("section",{staticClass:"profile block"},[e("div",{staticClass:"block_head"},[e("div",{staticClass:"title"},[e("svg",{staticClass:"icon"},[e("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_profile"}})]),a._v(" "+a._s(a.$t("message.page_title_profile"))+" ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col_left"},[e("div",{staticClass:"photo"},[e("div",{staticClass:"current"},[a.formData.avatar?e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.imagesUrl+a.formData.avatar.avatar_full,expression:"imagesUrl + formData.avatar.avatar_full"}],staticClass:"lazyload",attrs:{alt:""}}):e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/images/avatar_default.jpg",expression:"'/images/avatar_default.jpg'"}],staticClass:"lazyload",attrs:{alt:""}})]),e("input",{ref:"avatar",attrs:{type:"file",id:"avatar",accept:"image/*"},on:{change:a.avatarUpload}}),e("label",{staticClass:"change_btn",attrs:{for:"avatar"}},[a._v(" "+a._s(a.$t("message.btn_change_photo"))+" ")])])]),e("div",{staticClass:"col_main"},[e("div",{staticClass:"personal_info"},[e("form",{staticClass:"form",class:{processing:a.processing},on:{submit:function(t){return t.preventDefault(),a.onSubmit(t)}}},[e("div",{staticClass:"line"},[e("div",{staticClass:"field",class:{invalid:a.$v.formData.name.$error}},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:a.formData.name,expression:"formData.name",modifiers:{trim:!0}}],staticClass:"input",class:{active:a.formData.name.length},attrs:{type:"text"},domProps:{value:a.formData.name},on:{input:[function(t){t.target.composing||a.$set(a.formData,"name",t.target.value.trim())},a.$v.formData.name.$touch],blur:function(t){return a.$forceUpdate()}}}),e("div",{staticClass:"label"},[a._v(" "+a._s(a.$t("message.form_label_name"))+" ")]),!a.$v.formData.name.required&&a.$v.formData.name.$dirty?e("div",{staticClass:"error_text"},[a._v(" "+a._s(a.$t("message.valid_error_required"))+" ")]):a._e(),!a.$v.formData.name.minLength&&a.$v.formData.name.$dirty?e("div",{staticClass:"error_text"},[a._v(" "+a._s(a.$t("message.valid_error_minLength",{count:a.$v.formData.name.$params.minLength.min}))+" ")]):a._e(),!a.$v.formData.name.maxLength&&a.$v.formData.name.$dirty?e("div",{staticClass:"error_text"},[a._v(" "+a._s(a.$t("message.valid_error_maxLength",{count:a.$v.formData.name.$params.maxLength.max}))+" ")]):a._e()])]),e("div",{staticClass:"line"},[e("div",{staticClass:"field",class:{invalid:a.$v.formData.surname.$error}},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:a.formData.surname,expression:"formData.surname",modifiers:{trim:!0}}],staticClass:"input",class:{active:a.formData.surname.length},attrs:{type:"text"},domProps:{value:a.formData.surname},on:{input:[function(t){t.target.composing||a.$set(a.formData,"surname",t.target.value.trim())},a.$v.formData.surname.$touch],blur:function(t){return a.$forceUpdate()}}}),e("div",{staticClass:"label"},[a._v(" "+a._s(a.$t("message.form_label_surname"))+" ")]),!a.$v.formData.surname.required&&a.$v.formData.surname.$dirty?e("div",{staticClass:"error_text"},[a._v(" "+a._s(a.$t("message.valid_error_required"))+" ")]):a._e(),!a.$v.formData.surname.minLength&&a.$v.formData.surname.$dirty?e("div",{staticClass:"error_text"},[a._v(" "+a._s(a.$t("message.valid_error_minLength",{count:a.$v.formData.surname.$params.minLength.min}))+" ")]):a._e(),!a.$v.formData.surname.maxLength&&a.$v.formData.surname.$dirty?e("div",{staticClass:"error_text"},[a._v(" "+a._s(a.$t("message.valid_error_maxLength",{count:a.$v.formData.surname.$params.maxLength.max}))+" ")]):a._e()])]),e("div",{staticClass:"line phone"},[e("div",{staticClass:"field"},[e("div",{staticClass:"code"},[e("v-select",{attrs:{transition:"fade",disabled:"",options:a.countries,reduce:function(a){return a.code},value:a.formData.code},scopedSlots:a._u([{key:"selected-option",fn:function(t){var s=t.flag,r=t.label;return[e("img",{attrs:{src:a.imagesUrl+s,alt:""}}),e("span",[a._v(a._s(r))])]}},{key:"search",fn:function(t){var s=t.attributes,r=t.events;return["checkbox"===s.type?e("input",a._g(a._b({directives:[{name:"model",rawName:"v-model",value:a.countrySearch,expression:"countrySearch"}],staticClass:"vs__search",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(a.countrySearch)?a._i(a.countrySearch,null)>-1:a.countrySearch},on:{blur:function(t){a.countrySearch="+"},change:function(t){var e=a.countrySearch,s=t.target,r=!!s.checked;if(Array.isArray(e)){var i=null,o=a._i(e,i);s.checked?o<0&&(a.countrySearch=e.concat([i])):o>-1&&(a.countrySearch=e.slice(0,o).concat(e.slice(o+1)))}else a.countrySearch=r}}},"input",s,!1),r)):"radio"===s.type?e("input",a._g(a._b({directives:[{name:"model",rawName:"v-model",value:a.countrySearch,expression:"countrySearch"}],staticClass:"vs__search",attrs:{type:"radio"},domProps:{checked:a._q(a.countrySearch,null)},on:{blur:function(t){a.countrySearch="+"},change:function(t){a.countrySearch=null}}},"input",s,!1),r)):e("input",a._g(a._b({directives:[{name:"model",rawName:"v-model",value:a.countrySearch,expression:"countrySearch"}],staticClass:"vs__search",attrs:{type:s.type},domProps:{value:a.countrySearch},on:{blur:function(t){a.countrySearch="+"},input:function(t){t.target.composing||(a.countrySearch=t.target.value)}}},"input",s,!1),r))]}},{key:"no-options",fn:function(){return[a._v(" "+a._s(a.$t("message.valid_error_empty_search"))+" ")]},proxy:!0},{key:"option",fn:function(t){return[e("img",{attrs:{src:a.imagesUrl+t.flag,alt:""}}),e("span",[a._v(a._s(t.label))])]}}]),model:{value:a.formData.code,callback:function(t){a.$set(a.formData,"code","string"===typeof t?t.trim():t)},expression:"formData.code"}})],1),e("div",{staticClass:"number"},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:a.formData.phone,expression:"formData.phone",modifiers:{trim:!0}}],staticClass:"input",class:{active:a.formData.phone.length},attrs:{type:"number",readonly:""},domProps:{value:a.formData.phone},on:{input:function(t){t.target.composing||a.$set(a.formData,"phone",t.target.value.trim())},blur:function(t){return a.$forceUpdate()}}})])])]),e("div",{staticClass:"line"},[e("div",{staticClass:"field"},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:a.formData.email,expression:"formData.email",modifiers:{trim:!0}}],staticClass:"input",class:{active:a.formData.email.length},attrs:{type:"text",readonly:""},domProps:{value:a.formData.email},on:{input:function(t){t.target.composing||a.$set(a.formData,"email",t.target.value.trim())},blur:function(t){return a.$forceUpdate()}}}),e("div",{staticClass:"label"},[a._v(" "+a._s(a.$t("message.form_label_email"))+" ")])])]),e("div",{staticClass:"line"},[e("div",{staticClass:"field"},[e("input",{staticClass:"input active",attrs:{type:"password",value:"88888888",readonly:""}}),e("div",{staticClass:"label"},[a._v(" "+a._s(a.$t("message.form_label_password"))+" ")]),e("button",{staticClass:"edit_pass_btn",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),a.openEditPasswordModal(t)}}},[e("svg",{staticClass:"icon"},[e("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_edit"}})])])])]),e("div",{staticClass:"submit"},[e("button",{staticClass:"submit_btn",attrs:{type:"submit",disabled:a.$v.$invalid}},[a._v(" "+a._s(a.$t("message.btn_save"))+" ")])])])]),e("button",{staticClass:"logout",on:{click:function(t){return t.preventDefault(),a.logout(t)}}},[e("svg",{staticClass:"icon"},[e("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_logout"}})]),e("span",[a._v(a._s(a.$t("message.btn_logout")))])])])]),e("transition",{attrs:{name:"fade"}},[e("EditPasswordModal",{directives:[{name:"show",rawName:"v-show",value:a.showEditPasswordModal,expression:"showEditPasswordModal"}],on:{closeModalEvent:a.closeEditPasswordModal}})],1)],1)},r=[],i=(e("b0c0"),e("b0ca"),e("b5ae")),o=e("e0a8"),n={name:"UserProfile",metaInfo:function(){return{title:this.$i18n.t("message.page_title_profile")}},components:{EditPasswordModal:o["default"]},data:function(){return{processing:!1,showEditPasswordModal:!1,imagesUrl:"https://api.doctrine.im",countrySearch:"",countries:JSON.parse(JSON.stringify(this.$store.getters["getCountries"])),formData:JSON.parse(JSON.stringify(this.$store.getters["user/getData"]))}},validations:{formData:{name:{required:i["required"],minLength:Object(i["minLength"])(2),maxLength:Object(i["maxLength"])(32)},surname:{required:i["required"],minLength:Object(i["minLength"])(2),maxLength:Object(i["maxLength"])(32)}}},methods:{avatarUpload:function(){var a=this;this.$Progress.start();var t=new FormData;t.append("avatar",this.$refs.avatar.files[0]),this.$store.dispatch("user/uploadAvatar",t).then((function(t){a.$Progress.finish(),t.error&&a.$toast.error(a.$t("message.notification_error_avatar_update")),t.success&&(a.formData.avatar=t.data,a.$store.dispatch("user/update_photo",t.data),a.$toast.success(a.$t("message.notification_success_avatar_update")))}))},openEditPasswordModal:function(){this.showEditPasswordModal=!0,document.body.classList.add("lock")},closeEditPasswordModal:function(){this.showEditPasswordModal=!1,document.body.classList.remove("lock")},logout:function(){this.$root.$emit("logoutEvent")},onSubmit:function(){var a=this;this.processing=!0,this.$Progress.start();var t={name:this.formData.name,surname:this.formData.surname};this.$store.dispatch("user/update",t).then((function(t){a.processing=!1,a.$Progress.finish(),t.error&&a.$toast.error(a.$t("message.notification_error_update")),t.success&&a.$toast.success(a.$t("message.notification_success_update"))}))}}},c=n,l=e("2877"),m=Object(l["a"])(c,s,r,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=layout-pages-user-Profile-vue.59c9fbad.js.map