(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["layout-pages-author-CourseForm-vue","layout-components-lessons-LessonItem2-vue","layout-components-modal-DeleteCourse-vue","layout-components-modal-DeleteModule-vue"],{2916:function(t,e,s){},"2a16":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"lesson"},[s("div",{staticClass:"thumb"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imagesUrl+t.lesson.image,expression:"imagesUrl + lesson.image"}],staticClass:"lazyload",attrs:{alt:""}})]),s("div",{staticClass:"order"},[s("button",{staticClass:"up_btn",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.lessonMoveUp(t.lesson.position)}}}),s("button",{staticClass:"down_btn",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.lessonMoveDown(t.lesson.position)}}})]),s("div",{staticClass:"info"},[s("div",{staticClass:"name"},[s("span",[t._v(t._s(t.lesson.name))]),s("button",{staticClass:"edit_btn",on:{click:function(e){return e.preventDefault(),t.$root.$emit("openCreateLessonModalEvent",t.lesson.slug)}}},[s("svg",{staticClass:"icon"},[s("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_edit"}})])]),s("button",{staticClass:"del_btn",on:{click:function(e){return e.preventDefault(),t.deleteLesson(e)}}},[s("svg",{staticClass:"icon"},[s("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_delete"}})])])]),s("div",{staticClass:"desc"},[t._v(t._s(t.lesson.short_description))]),t.lesson.files_count?s("div",{staticClass:"materials"},[s("svg",{staticClass:"icon"},[s("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_materials"}})]),s("span",[t._v(t._s(t.$tc("message.course_components_materials_count",t.lesson.files_count)))])]):t._e(),s("div",{staticClass:"mob_btns"},[s("button",{staticClass:"edit_btn",on:{click:function(e){return e.preventDefault(),t.$root.$emit("openCreateLessonModalEvent",t.lesson.slug)}}},[t._v(" "+t._s(t.$t("message.btn_edit"))+" ")]),s("button",{staticClass:"del_btn",on:{click:function(e){return e.preventDefault(),t.deleteLesson(e)}}},[s("svg",{staticClass:"icon"},[s("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_delete"}})])])])])])},a=[],i=(s("ae7b"),{name:"LessonItem",props:["lesson","lessonIndex","moduleIndex"],data:function(){return{imagesUrl:"https://api.doctrine.im"}},methods:{onCopy:function(){this.$toast.success(this.$t("message.notification_success_link_copy"))},deleteLesson:function(){this.$root.$emit("openDeleteLessonModal",this.moduleIndex,this.lessonIndex)},lessonMoveUp:function(t){this.$root.$emit("lessonMoveUpEvent",this.moduleIndex,t)},lessonMoveDown:function(t){this.$root.$emit("lessonMoveDownEvent",this.moduleIndex,t)}}}),n=i,r=s("2877"),l=Object(r["a"])(n,o,a,!1,null,null,null);e["default"]=l.exports},"2a2e":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"modal_container"},[s("section",{staticClass:"modal_scroll",on:{click:function(e){return e.target!==e.currentTarget?null:t.closeModal(e)}}},[s("section",{staticClass:"modal"},[s("button",{staticClass:"close",on:{click:function(e){return e.preventDefault(),t.closeModal(e)}}}),s("div",{staticClass:"modal_title"},[t._v(" "+t._s(t.$t("message.modal_title_delete_course"))+" ")]),s("div",{staticClass:"detele_confirm"},[s("img",{staticClass:"icon",attrs:{src:"/images/ic_delete_confirm.svg",alt:""}}),s("div",{staticClass:"title",domProps:{innerHTML:t._s(t.$t("message.modal_delete_course_confirm"))}}),s("div",{staticClass:"btns"},[s("button",{on:{click:function(e){return e.preventDefault(),t.closeModal(e)}}},[t._v(" "+t._s(t.$t("message.no"))+" ")]),s("button",{staticClass:"yes",on:{click:function(e){return e.preventDefault(),t.deleteCourse(e)}}},[t._v(" "+t._s(t.$t("message.yes"))+" ")])])])])])])},a=[],i={name:"DeleteLessonModal",methods:{closeModal:function(){this.$emit("closeModalEvent")},deleteCourse:function(){this.$Progress.start(),this.$root.$emit("deleteCourseEvent"),this.closeModal()}}},n=i,r=s("2877"),l=Object(r["a"])(n,o,a,!1,null,null,null);e["default"]=l.exports},"30ae":function(t,e,s){},"35ba":function(t,e){(function(){Array.prototype.move||(Array.prototype.move=function(t,e){if(0===this.length)return this;while(t<0)t+=this.length;while(e<0)e+=this.length;if(e>=this.length){var s=e-this.length;while(1+s--)this.push(void 0)}return this.splice(e,0,this.splice(t,1)[0]),this})})()},6780:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"modal_container"},[s("section",{staticClass:"modal_scroll",on:{click:function(e){return e.target!==e.currentTarget?null:t.closeModal(e)}}},[s("section",{staticClass:"modal"},[s("button",{staticClass:"close",on:{click:function(e){return e.preventDefault(),t.closeModal(e)}}}),s("div",{staticClass:"modal_title"},[t._v(" "+t._s(t.$t("message.modal_title_delete_module"))+" ")]),s("div",{staticClass:"detele_confirm"},[s("img",{staticClass:"icon",attrs:{src:"/images/ic_delete_confirm.svg",alt:""}}),s("div",{staticClass:"title",domProps:{innerHTML:t._s(t.$t("message.modal_delete_module_confirm"))}}),s("div",{staticClass:"btns"},[s("button",{on:{click:function(e){return e.preventDefault(),t.closeModal(e)}}},[t._v(" "+t._s(t.$t("message.no"))+" ")]),s("button",{staticClass:"yes",on:{click:function(e){return e.preventDefault(),t.deleteModule(e)}}},[t._v(" "+t._s(t.$t("message.yes"))+" ")])])])])])])},a=[],i={name:"DeleteModuleModal",methods:{closeModal:function(){this.$emit("closeModalEvent")},deleteModule:function(){this.$Progress.start(),this.$root.$emit("deleteModuleEvent"),this.closeModal()}}},n=i,r=s("2877"),l=Object(r["a"])(n,o,a,!1,null,null,null);e["default"]=l.exports},"74ea":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.preloader?s("Preloader"):s("section",{staticClass:"page_data"},[s("form",{staticClass:"course_form form",class:{processing:t.processing},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("div",{staticClass:"block_head bg"},[s("div",{staticClass:"title"},[s("svg",{staticClass:"icon"},[s("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_course"}})]),t._v(" "+t._s(t.$t("message.page_title_add_course"))+" ")])]),s("div",{staticClass:"data"},[s("div",{staticClass:"block description"},[s("div",{staticClass:"info"},[s("div",{staticClass:"block_title"},[t._v(" "+t._s(t.$t("message.form_title_upload_poster"))+" "),s("div",{staticClass:"exp",domProps:{innerHTML:t._s(t.$t("message.form_upload_poster_exp",{size:2}))}})]),s("div",{staticClass:"line upload"},[s("div",{staticClass:"field",on:{dragover:t.fileDragOver,drop:t.fileDrop}},[s("input",{ref:"poster",attrs:{type:"file",id:"poster",accept:"image/*"},on:{change:t.fileUpload}}),s("label",{attrs:{for:"poster"}},[s("div",[s("div",{staticClass:"btn"},[s("svg",{staticClass:"icon"},[s("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_image"}})]),s("span",[t._v(t._s(t.$t("message.btn_upload")))])]),s("div",{staticClass:"exp"},[t._v(t._s(t.$t("message.form_upload_drag_exp")))])])]),t.formData.posterPreview?s("div",{staticClass:"image"},[t.formData.image?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.formData.posterPreview,expression:"formData.posterPreview"}],staticClass:"lazyload",attrs:{alt:""}}):s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imagesUrl+t.formData.posterPreview,expression:"imagesUrl + formData.posterPreview"}],staticClass:"lazyload",attrs:{alt:""}}),s("button",{staticClass:"del_btn",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.fileDelete(e)}}},[s("svg",{staticClass:"icon"},[s("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_delete"}})])])]):t._e()]),!t.$v.formData.posterPreview.required&&t.$v.formData.posterPreview.$dirty?s("div",{staticClass:"error_text"},[t._v(" "+t._s(t.$t("message.valid_error_required"))+" ")]):t._e()]),s("div",{staticClass:"block_title"},[t._v(" "+t._s(t.$t("message.form_title_course_info"))+" ")]),s("div",{staticClass:"line"},[s("div",{staticClass:"field",class:{invalid:t.$v.formData.name.$error}},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.name,expression:"formData.name",modifiers:{trim:!0}},{name:"focus",rawName:"v-focus"}],staticClass:"input with_limit",class:{active:0!=t.formData.name.length},attrs:{type:"text",maxlength:"60"},domProps:{value:t.formData.name},on:{input:[function(e){e.target.composing||t.$set(t.formData,"name",e.target.value.trim())},t.$v.formData.name.$touch],blur:function(e){return t.$forceUpdate()}}}),s("div",{staticClass:"label"},[t._v(" "+t._s(t.$t("message.form_label_course_name"))+" ")]),s("div",{staticClass:"tooltip",attrs:{id:"tooltip1"}},[s("v-popover",{attrs:{container:"#tooltip1"}},[s("svg",{staticClass:"tooltip_icon tooltip-target"},[s("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_tooltip2"}})]),s("template",{slot:"popover"},[s("div",{staticClass:"thumb"},[s("img",{staticClass:"lozad",attrs:{"data-src":"/images/tmp/video_thumb2.jpg",alt:""}})]),s("a",{staticClass:"video_link",attrs:{href:"https://www.youtube.com/watch?v=60VYXd9RVJ0"}},[s("svg",{staticClass:"icon"},[s("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_video_play"}})]),s("span",[t._v("Смотреть видео")])]),s("div",{staticClass:"text"},[t._v("Электрон недетерминировано переворачивает плазменный фонон. Волна, вследствие квантового характера явления, отражает вихревой взрыв...")])])],2)],1),s("div",{staticClass:"limit_count"},[t._v(t._s(60-t.formData.name.length))])]),!t.$v.formData.name.required&&t.$v.formData.name.$dirty?s("div",{staticClass:"error_text"},[t._v(" "+t._s(t.$t("message.valid_error_required"))+" ")]):t._e(),!t.$v.formData.name.maxLength&&t.$v.formData.name.$dirty?s("div",{staticClass:"error_text"},[t._v(" "+t._s(t.$t("message.valid_error_maxLength",{count:t.$v.formData.name.$params.maxLength.max}))+" ")]):t._e()]),s("div",{staticClass:"line category"},[s("div",{staticClass:"field",class:{invalid:t.$v.formData.category_id.$error}},[s("v-select",{class:{selected:0!=t.formData.category_id},attrs:{transition:"fade",options:t.categories,reduce:function(t){return t.id},value:t.formData.category_id},scopedSlots:t._u([{key:"selected-option",fn:function(e){var o=e.label;return[s("span",[t._v(t._s(o))])]}},{key:"search",fn:function(e){var o=e.attributes,a=e.events;return[s("input",t._g(t._b({staticClass:"vs__search"},"input",o,!1),a))]}},{key:"no-options",fn:function(){return[t._v(" "+t._s(t.$t("message.valid_error_empty_search"))+" ")]},proxy:!0},{key:"option",fn:function(e){return[s("span",[t._v(t._s(e.label))])]}}]),model:{value:t.formData.category_id,callback:function(e){t.$set(t.formData,"category_id","string"===typeof e?e.trim():e)},expression:"formData.category_id"}}),s("div",{staticClass:"label"},[t._v(" "+t._s(t.$t("message.form_label_course_category"))+" ")])],1),!t.$v.formData.category_id.required&&t.$v.formData.category_id.$dirty?s("div",{staticClass:"error_text"},[t._v(" "+t._s(t.$t("message.valid_error_required"))+" ")]):t._e()]),s("div",{staticClass:"line"},[s("div",{staticClass:"field",class:{invalid:t.$v.formData.short_description.$error}},[s("textarea-autosize",{staticClass:"with_limit",class:{active:0!=t.formData.short_description.length},attrs:{maxlength:"130"},model:{value:t.formData.short_description,callback:function(e){t.$set(t.formData,"short_description","string"===typeof e?e.trim():e)},expression:"formData.short_description"}}),s("div",{staticClass:"label"},[t._v(" "+t._s(t.$t("message.form_label_summary"))+" ")]),s("div",{staticClass:"limit_count"},[t._v(t._s(130-t.formData.short_description.length))])],1),!t.$v.formData.short_description.required&&t.$v.formData.short_description.$dirty?s("div",{staticClass:"error_text"},[t._v(" "+t._s(t.$t("message.valid_error_required"))+" ")]):t._e(),!t.$v.formData.short_description.maxLength&&t.$v.formData.short_description.$dirty?s("div",{staticClass:"error_text"},[t._v(" "+t._s(t.$t("message.valid_error_maxLength",{count:t.$v.formData.short_description.$params.maxLength.max}))+" ")]):t._e()]),s("div",{staticClass:"line url"},[s("div",{staticClass:"name"},[t._v(t._s(t.$t("message.form_label_slug")))]),s("button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.appUrl+"/course/"+t.$store.state.user.data.slug+"/"+t.formData.slug,expression:"`${appUrl}/course/${$store.state.user.data.slug}/${formData.slug}`",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticClass:"copy_btn",attrs:{type:"button"}},[s("span",[t._v(t._s(t.$t("message.btn_copy_url")))]),s("svg",{staticClass:"icon"},[s("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_copy2"}})])]),s("div",{staticClass:"field",class:{invalid:t.$v.formData.slug.$error}},[s("div",{staticClass:"pre_value"},[t._v(t._s(t.appUrl)+"/course/"+t._s(t.$store.state.user.data.slug)+"/")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.slug,expression:"formData.slug",modifiers:{trim:!0}}],staticClass:"input url_input",attrs:{type:"text",maxlength:"100"},domProps:{value:t.formData.slug},on:{input:[function(e){e.target.composing||t.$set(t.formData,"slug",e.target.value.trim())},t.$v.formData.slug.$touch],blur:function(e){return t.$forceUpdate()}}}),s("transition",{attrs:{name:"fade"}},[0!=t.formData.slug.length?s("button",{staticClass:"remove",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.formData.slug="",t.slugOccupied=!1}}}):t._e()])],1),!t.$v.formData.slug.required&&t.$v.formData.slug.$dirty?s("div",{staticClass:"error_text"},[t._v(" "+t._s(t.$t("message.valid_error_required"))+" ")]):t._e(),!t.$v.formData.slug.maxLength&&t.$v.formData.slug.$dirty?s("div",{staticClass:"error_text"},[t._v(" "+t._s(t.$t("message.valid_error_maxLength",{count:t.$v.formData.slug.$params.maxLength.max}))+" ")]):t._e(),t.slugOccupied?s("div",{staticClass:"error_text"},[t._v(" "+t._s(t.$t("message.valid_error_slug_course"))+" ")]):t._e()])])]),s("div",{staticClass:"block program"},[s("div",{staticClass:"block_title"},[t._v(" "+t._s(t.$t("message.form_title_course_modules"))+" ")]),0!=t.formData.modules.length?s("div",{staticClass:"list accordion"},t._l(t.formData.modules,(function(e,o){return s("div",{key:""+o,staticClass:"item"},[s("div",{directives:[{name:"accordion",rawName:"v-accordion"}],staticClass:"head"},[s("div",{staticClass:"title"},[s("span",[t._v(t._s(e.name))])]),s("button",{staticClass:"edit_btn",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.openEditModuleModal({index:o,name:e.name})}}},[s("svg",{staticClass:"icon"},[s("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_edit"}})])]),s("button",{staticClass:"del_btn",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.openDeleteModuleModal(o)}}},[s("svg",{staticClass:"icon"},[s("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_delete"}})])]),s("div",{staticClass:"arr"}),s("div",{staticClass:"order"},[s("button",{staticClass:"up_btn",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.moduleMoveUp(e.position)}}}),s("button",{staticClass:"down_btn",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.moduleMoveDown(e.position)}}})]),s("div",{staticClass:"mob_actions"},[s("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.moduleMobDropdown=o}}},[s("span")]),t.moduleMobDropdown===o?s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeModuleMobDropdown,expression:"closeModuleMobDropdown"}],staticClass:"dropdown"},[s("div",{staticClass:"edit"},[s("button",{attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.openEditModuleModal({index:o,name:e.name})}}},[s("svg",{staticClass:"icon"},[s("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_edit"}})]),s("span",[t._v(t._s(t.$t("message.btn_edit")))])])]),s("div",{staticClass:"move_up"},[s("button",{attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.moduleMoveUp(e.position)}}},[s("span",[t._v(t._s(t.$t("message.btn_move_up")))])])]),s("div",{staticClass:"move_down"},[s("button",{attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.moduleMoveDown(e.position)}}},[s("span",[t._v(t._s(t.$t("message.btn_move_down")))])])]),s("div",{staticClass:"delete border"},[s("button",{attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.openDeleteModuleModal(o)}}},[s("svg",{staticClass:"icon"},[s("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_delete"}})]),s("span",[t._v(t._s(t.$t("message.btn_delete")))])])])]):t._e()])]),s("div",{staticClass:"data lessons"},[0!=e.lessons.length?s("div",{staticClass:"list"},t._l(e.lessons,(function(t,e){return s("LessonItem",{key:""+e,attrs:{lesson:t,lessonIndex:""+e,moduleIndex:""+o}})})),1):t._e(),s("button",{staticClass:"add_lesson_btn",on:{click:function(s){return s.preventDefault(),t.openAddLessonModal({index:o,name:e.name})}}},[s("svg",{staticClass:"icon"},[s("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_add_video"}})]),s("span",[t._v(t._s(t.$t("message.btn_add_lesson")))])])])])})),0):t._e(),s("button",{staticClass:"add_btn",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.openAddModuleModal(e)}}},[s("span",{staticClass:"icon"}),t._v(t._s(t.$t("message.btn_add_module"))+" ")])]),t.processing?s("Preloader"):t._e()],1),t.formData.id?s("div",{staticClass:"delete_course"},[s("button",{attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.openDeleteCourseModal(e)}}},[s("svg",{staticClass:"icon"},[s("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_delete"}})]),s("span",[t._v(t._s(t.$t("message.btn_delete_course")))])])]):t._e(),s("div",{staticClass:"fixed_panel"},[0!=t.formData.name.length?s("div",{staticClass:"name"},[s("svg",{staticClass:"icon"},[s("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_course"}})]),t._v(" "+t._s(t.formData.name)+" ")]):t._e(),s("button",{staticClass:"submit_btn publish_btn",attrs:{type:"submit"}},[t.formData.id?s("span",[t._v(t._s(t.$t("message.btn_save")))]):s("span",[t._v(t._s(t.$t("message.btn_publish")))])])])]),s("transition",{attrs:{name:"fade"}},[t.showAddModuleModal?s("AddModuleModal",{on:{closeModalEvent:t.closeAddModuleModal}}):t._e()],1),s("transition",{attrs:{name:"fade"}},[t.showEditModuleModal?s("EditModuleModal",{attrs:{module:t.moduleInfo},on:{closeModalEvent:t.closeEditModuleModal}}):t._e()],1),s("transition",{attrs:{name:"fade"}},[t.showDeleteModuleModal?s("DeleteModuleModal",{on:{closeModalEvent:t.closeDeleteModuleModal}}):t._e()],1),s("transition",{attrs:{name:"fade"}},[t.showAddLessonModal?s("AddLessonModal",{attrs:{module:t.lessonModule},on:{closeModalEvent:t.closeAddLessonModal}}):t._e()],1),s("transition",{attrs:{name:"fade"}},[t.showDeleteLessonModal?s("DeleteLessonModal",{on:{closeModalEvent:t.closeDeleteLessonModal}}):t._e()],1),s("transition",{attrs:{name:"fade"}},[t.showDeleteCourseModal?s("DeleteCourseModal",{on:{closeModalEvent:t.closeDeleteCourseModal}}):t._e()],1)],1)},a=[],i=(s("4160"),s("a434"),s("b0c0"),s("ac1f"),s("5319"),s("159b"),s("b85c")),n=s("5530"),r=(s("30ae"),s("2916"),s("f152")),l=s("c50b"),c=s("dbbb"),d=s("6780"),u=s("be57"),m=s("c661"),f=s("2a16"),v=s("2a2e"),_=s("b5ae"),p=s("108b"),g=s.n(p),h=(s("35ba"),s("2f62")),$={name:"AuthorAddCourse",metaInfo:function(){return{title:this.$i18n.t("message.page_title_add_course"),bodyAttrs:{class:["course_form"]}}},components:{Preloader:r["default"],AddModuleModal:l["default"],EditModuleModal:c["default"],DeleteModuleModal:d["default"],AddLessonModal:u["default"],DeleteLessonModal:m["default"],DeleteCourseModal:v["default"],LessonItem:f["default"]},data:function(){return{preloader:!0,processing:!1,showAddModuleModal:!1,showEditModuleModal:!1,showDeleteModuleModal:!1,showAddLessonModal:!1,showDeleteLessonModal:!1,showDeleteCourseModal:!1,slugOccupied:!1,imagesUrl:"https://api.doctrine.im",appUrl:"https://app.doctrine.im",moduleInfo:{},moduleMobDropdown:!1,lessonModule:{},lessonInfo:{},deleteLesson:{},watchEnable:!1,formData:{name:"",category_id:0,posterPreview:"",short_description:"",slug:"",modules:[]}}},validations:{formData:{posterPreview:{required:_["required"]},name:{required:_["required"],maxLength:Object(_["maxLength"])(60)},category_id:{required:_["required"]},short_description:{required:_["required"],maxLength:Object(_["maxLength"])(130)},slug:{required:_["required"],maxLength:Object(_["maxLength"])(100)}}},computed:Object(n["a"])({},Object(h["b"])({categories:"getCourseСategories"})),beforeCreate:function(){var t=this;this.formData={name:"",category_id:0,posterPreview:"",short_description:"",slug:"",modules:[]},this.$store.dispatch("loadCourseСategories"),this.$route.params.courseId&&this.$store.dispatch("courseInfo/editCourseInfo",this.$route.params.courseId).then((function(e){e.success&&(localStorage.removeItem("courseModules"),t.formData=e.data)}))},mounted:function(){var t=this;!this.formData.id&&localStorage.getItem("courseModules")&&(this.formData.modules=JSON.parse(localStorage.getItem("courseModules"))),this.preloader=!1,this.$root.$on("addModuleEvent",(function(e){t.formData.modules.push(e),t.formData.modules.forEach((function(t,e){return t.position=e})),t.$Progress.finish(),t.$toast.clear(),t.$toast.success(t.$t("message.notification_success_module_add")),setTimeout((function(){var t,e=Object(i["a"])(document.querySelector(".program .list").querySelectorAll(".item"));try{for(e.s();!(t=e.n()).done;){var s=t.value;s.classList.remove("active")}}catch(o){e.e(o)}finally{e.f()}document.querySelector(".program .list .item:last-child").classList.add("active")}))})),this.$root.$on("editModuleEvent",(function(e){t.formData.modules[e.index].name=e.name,t.$Progress.finish(),t.$toast.clear(),t.$toast.success(t.$t("message.notification_success_module_edit"))})),this.$root.$on("deleteModuleEvent",(function(){t.formData.modules.splice(t.moduleInfo.index,1),t.formData.modules.forEach((function(t,e){t.position=e})),t.$Progress.finish(),t.$toast.clear(),t.$toast.success(t.$t("message.notification_success_module_delete"))})),this.$root.$on("openDeleteLessonModal",(function(e,s){t.deleteLesson={moduleIndex:e,lessonIndex:s},t.showDeleteLessonModal=!0,document.body.classList.add("lock")})),this.$root.$on("addLessonEvent",(function(e){t.formData.modules[t.lessonModule.index].lessons.push(e),t.formData.modules[t.lessonModule.index].lessons.forEach((function(t,e){t.position=e})),t.$Progress.finish(),t.$toast.clear(),t.$toast.success(t.$t("message.notification_success_lesson_add"))})),this.$root.$on("deleteModuleLessonEvent",(function(){t.formData.modules[t.deleteLesson.moduleIndex].lessons.splice(t.deleteLesson.lessonIndex,1),t.formData.modules[t.deleteLesson.moduleIndex].lessons.forEach((function(t,e){t.position=e})),t.$Progress.finish(),t.$toast.clear(),t.$toast.success(t.$t("message.notification_success_lesson_delete")),t.closeDeleteLessonModal()})),this.$root.$on("lessonMoveUpEvent",(function(e,s){t.formData.modules[e].lessons.move(s,s-1),t.formData.modules[e].lessons.forEach((function(t,e){t.position=e}))})),this.$root.$on("lessonMoveDownEvent",(function(e,s){t.formData.modules[e].lessons.move(s,s+1),t.formData.modules[e].lessons.forEach((function(t,e){t.position=e}))})),this.$root.$on("deleteCourseEvent",(function(){t.$Progress.start(),t.$store.dispatch("courseInfo/deleteCourse",t.formData.id).then((function(){t.$Progress.finish(),t.$store.state.authorCourses.data=[],t.$router.push("/".concat(t.$store.state.user.data.route,"/courses"))}))}))},methods:{fileUpload:function(){var t=this.$refs.poster.files[0];if(t.size<=2097152){this.formData.image=t;var e=new FileReader;e.addEventListener("load",function(){this.formData.posterPreview=e.result}.bind(this),!1),this.formData.image&&e.readAsDataURL(this.formData.image),this.$v.formData.posterPreview.$touch()}else this.fileDelete(),this.$toast.error(this.$t("message.notification_error_poster"))},fileDelete:function(){this.formData.posterPreview="",this.formData.image="",this.$refs.poster.value=""},fileDragOver:function(t){t.preventDefault()},fileDrop:function(t){t.preventDefault(),this.$refs.poster.files=t.dataTransfer.files,this.fileUpload()},onCopy:function(){this.$toast.clear(),this.$toast.success(this.$t("message.notification_success_link_copy"))},openAddModuleModal:function(){this.showAddModuleModal=!0,document.body.classList.add("lock")},closeAddModuleModal:function(){this.showAddModuleModal=!1,document.body.classList.remove("lock")},openAddLessonModal:function(t){this.lessonModule=t,this.showAddLessonModal=!0,document.body.classList.add("lock")},closeAddLessonModal:function(){this.showAddLessonModal=!1,document.body.classList.remove("lock")},openEditModuleModal:function(t){this.moduleInfo=t,this.showEditModuleModal=!0,document.body.classList.add("lock")},closeEditModuleModal:function(){this.moduleInfo={},this.showEditModuleModal=!1,document.body.classList.remove("lock")},openDeleteModuleModal:function(t){this.moduleInfo.index=t,this.showDeleteModuleModal=!0,document.body.classList.add("lock")},closeDeleteModuleModal:function(){this.moduleInfo={},this.showDeleteModuleModal=!1,document.body.classList.remove("lock")},closeDeleteLessonModal:function(){this.deleteLesson={},this.showDeleteLessonModal=!1,document.body.classList.remove("lock")},openDeleteCourseModal:function(){this.showDeleteCourseModal=!0,document.body.classList.add("lock")},closeDeleteCourseModal:function(){this.showDeleteCourseModal=!1,document.body.classList.remove("lock")},moduleMoveUp:function(t){this.formData.modules.move(t,t-1),this.formData.modules.forEach((function(t,e){t.position=e})),this.moduleMobDropdown=!1},moduleMoveDown:function(t){this.formData.modules.move(t,t+1),this.formData.modules.forEach((function(t,e){t.position=e})),this.moduleMobDropdown=!1},closeModuleMobDropdown:function(){this.moduleMobDropdown=!1},onSubmit:function(){var t=this;if(this.$v.$touch(),this.$v.$invalid)this.$toast.clear(),this.$toast.error(this.$t("message.notification_error_required")),document.querySelector(".modal_scroll").scrollTop=0;else{this.processing=!0,this.$Progress.start();var e=new FormData;e.append("id",this.formData.id),e.append("name",this.formData.name),e.append("category_id",this.formData.category_id),e.append("short_description",this.formData.short_description),e.append("slug",this.formData.slug),e.append("modules",JSON.stringify(this.formData.modules)),this.$refs.poster.files.length>0&&e.append("image",this.$refs.poster.files[0]);var s=this.formData.id?"courseInfo/updateCourse":"courseInfo/createCourse";this.$store.dispatch(s,e).then((function(e){if(e.error)return t.processing=!1,t.$toast.clear(),t.formData.id?t.$toast.error(t.$t("message.notification_error_update_course")):t.$toast.error(t.$t("message.notification_error_create_course")),t.$Progress.finish(),void(e.message.memory&&t.$root.$emit("openLimitMemoryModalEvent"));t.$toast.clear(),t.formData.id?t.$toast.success(t.$t("message.notification_success_update_course")):t.$toast.success(t.$t("message.notification_success_create_course")),t.$store.state.authorCourses.data=[],t.$router.push("/".concat(t.$store.state.user.data.route,"/courses"))}))}}},destroyed:function(){localStorage.removeItem("courseModules")},watch:{"formData.modules":{handler:function(t){var e=JSON.stringify(t);localStorage.setItem("courseModules",e)},deep:!0},"formData.slug":function(){var t=this;this.formData.slug.length>0&&this.watchEnable&&this.$store.dispatch("checkCourseSlug",{slug:this.formData.slug,id:this.formData.id}).then((function(e){t.slugOccupied=!e})),this.formData.slug=this.formData.slug.replace(/[!@#$%^&*()+=.,/]/g,""),this.watchEnable=!0},"formData.name":function(){this.watchEnable&&(this.formData.slug=g()().transform(this.formData.name,"_").toLowerCase().replace(/[!?@#$%^&*()+=.,/]/g,"")),this.watchEnable=!0}}},D=$,b=s("2877"),C=Object(b["a"])(D,o,a,!1,null,null,null);e["default"]=C.exports},"93b4":function(t,e,s){},ae7b:function(t,e,s){},be57:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"modal_container"},[s("section",{staticClass:"modal_scroll",on:{click:function(e){return e.target!==e.currentTarget?null:t.closeModal(e)}}},[s("section",{staticClass:"modal",attrs:{id:"add_lesson_modal"}},[s("button",{staticClass:"close",on:{click:function(e){return e.preventDefault(),t.closeModal(e)}}}),s("div",{staticClass:"modal_title"},[t._v(" "+t._s(t.$t("message.modal_title_add_lesson",{module:t.module.name}))+" ")]),s("form",{staticClass:"form"},[s("div",{staticClass:"line"},[s("div",{staticClass:"field"},[s("button",{staticClass:"new_lesson_btn",on:{click:function(e){return e.preventDefault(),t.$root.$emit("openCreateLessonModalEvent")}}},[t._v(" "+t._s(t.$t("message.btn_add_new_lesson"))+" ")])])]),s("div",{staticClass:"line"},[s("div",{staticClass:"field with_tip"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name,expression:"name",modifiers:{trim:!0}},{name:"focus",rawName:"v-focus"}],staticClass:"input",class:{active:0!=t.name.length},attrs:{type:"text"},domProps:{value:t.name},on:{input:[function(e){e.target.composing||(t.name=e.target.value.trim())},t.$v.name.$touch],blur:function(e){return t.$forceUpdate()}}}),s("div",{staticClass:"label"},[t._v(" "+t._s(t.$t("message.form_label_lesson_course_name"))+" ")]),t.tips?s("div",{staticClass:"datalist"},[s("div",{staticClass:"group lessons"},t._l(t.tips,(function(e,o){return s("div",{key:""+o,staticClass:"tip",on:{click:function(s){return s.preventDefault(),t.chooseLesson(e)}}},[s("svg",{staticClass:"icon"},[s("use",{attrs:{"xlink:href":"/images/sprite.svg#ic_lesson"}})]),t._v(" "+t._s(e.name)+" ")])})),0)]):t._e(),0===t.tips.length?s("div",{staticClass:"datalist"},[s("div",{staticClass:"empty"},[t._v(" "+t._s(t.$t("message.valid_error_empty_search"))+" ")])]):t._e()])])])])])])},a=[],i=(s("b0c0"),s("93b4"),s("b5ae")),n={name:"AddModuleModal",props:["module"],data:function(){return{name:"",tips:!1}},validations:{name:{required:i["required"],maxLength:Object(i["maxLength"])(200)}},mounted:function(){this.findLesson()},methods:{closeModal:function(){this.$emit("closeModalEvent")},chooseLesson:function(t){this.$Progress.start(),this.$root.$emit("addLessonEvent",t),this.closeModal()},findLesson:function(){var t=this;this.$store.dispatch("findLesson",this.name).then((function(e){t.tips=e.data}))}},watch:{name:function(){console.log("dsgsdgsdgsd"),this.findLesson()}}},r=n,l=s("2877"),c=Object(l["a"])(r,o,a,!1,null,null,null);e["default"]=c.exports},c50b:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"modal_container"},[s("section",{staticClass:"modal_scroll",on:{click:function(e){return e.target!==e.currentTarget?null:t.closeModal(e)}}},[s("section",{staticClass:"modal"},[s("button",{staticClass:"close",on:{click:function(e){return e.preventDefault(),t.closeModal(e)}}}),s("div",{staticClass:"modal_title"},[t._v(" "+t._s(t.$t("message.modal_title_add_module"))+" ")]),s("form",{staticClass:"form",class:{processing:t.processing},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("div",{staticClass:"line"},[s("div",{staticClass:"field",class:{invalid:t.$v.formData.name.$error}},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.name,expression:"formData.name",modifiers:{trim:!0}},{name:"focus",rawName:"v-focus"}],staticClass:"input",class:{active:0!=t.formData.name.length},attrs:{type:"text",maxlength:"200"},domProps:{value:t.formData.name},on:{input:[function(e){e.target.composing||t.$set(t.formData,"name",e.target.value.trim())},t.$v.formData.name.$touch],blur:function(e){return t.$forceUpdate()}}}),s("div",{staticClass:"label"},[t._v(" "+t._s(t.$t("message.form_label_module_name"))+" ")])]),!t.$v.formData.name.required&&t.$v.formData.name.$dirty?s("div",{staticClass:"error_text"},[t._v(" "+t._s(t.$t("message.valid_error_required"))+" ")]):t._e()]),s("div",{staticClass:"submit"},[s("button",{staticClass:"submit_btn",attrs:{type:"submit",disabled:t.$v.$invalid}},[t._v(" "+t._s(t.$t("message.btn_add"))+" ")])])])])])])},a=[],i=s("b5ae"),n={name:"AddModuleModal",data:function(){return{processing:!1,formData:{name:"",position:0,lessons:[]}}},validations:{formData:{name:{required:i["required"],maxLength:Object(i["maxLength"])(200)}}},methods:{closeModal:function(){this.$emit("closeModalEvent")},onSubmit:function(){this.processing=!0,this.$Progress.start(),this.$root.$emit("addModuleEvent",this.formData),this.closeModal()}}},r=n,l=s("2877"),c=Object(l["a"])(r,o,a,!1,null,null,null);e["default"]=c.exports},dbbb:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"modal_container"},[s("section",{staticClass:"modal_scroll",on:{click:function(e){return e.target!==e.currentTarget?null:t.closeModal(e)}}},[s("section",{staticClass:"modal"},[s("button",{staticClass:"close",on:{click:function(e){return e.preventDefault(),t.closeModal(e)}}}),s("div",{staticClass:"modal_title"},[t._v(" "+t._s(t.$t("message.modal_title_edit_module"))+" ")]),s("form",{staticClass:"form",class:{processing:t.processing},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("div",{staticClass:"line"},[s("div",{staticClass:"field",class:{invalid:t.$v.formData.name.$error}},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.name,expression:"formData.name",modifiers:{trim:!0}},{name:"focus",rawName:"v-focus"}],staticClass:"input",class:{active:0!=t.formData.name.length},attrs:{type:"text",maxlength:"200"},domProps:{value:t.formData.name},on:{input:[function(e){e.target.composing||t.$set(t.formData,"name",e.target.value.trim())},t.$v.formData.name.$touch],blur:function(e){return t.$forceUpdate()}}}),s("div",{staticClass:"label"},[t._v(" "+t._s(t.$t("message.form_label_module_name"))+" ")])]),!t.$v.formData.name.required&&t.$v.formData.name.$dirty?s("div",{staticClass:"error_text"},[t._v(" "+t._s(t.$t("message.valid_error_required"))+" ")]):t._e()]),s("div",{staticClass:"submit"},[s("button",{staticClass:"submit_btn",attrs:{type:"submit",disabled:t.$v.$invalid}},[t._v(" "+t._s(t.$t("message.btn_save"))+" ")])])])])])])},a=[],i=(s("b0c0"),s("b5ae")),n={name:"EditModuleModal",props:["module"],data:function(){return{processing:!1,formData:{index:this.module.index,name:this.module.name}}},validations:{formData:{name:{required:i["required"],maxLength:Object(i["maxLength"])(200)}}},methods:{closeModal:function(){this.$emit("closeModalEvent")},onSubmit:function(){this.processing=!0,this.$Progress.start(),this.$root.$emit("editModuleEvent",this.formData),this.closeModal()}}},r=n,l=s("2877"),c=Object(l["a"])(r,o,a,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=layout-pages-author-CourseForm-vue.5f254844.js.map